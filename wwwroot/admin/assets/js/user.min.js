var userManager={submitDialogs:[],submitActions:[],addSubmitDialog:function(e){userManager.submitDialogs.push(e)},addSubmitAction:function(e){userManager.submitActions.push(e)},submitForm:function(i,e){var a=0,s=userManager.submitDialogs,o=userManager.submitActions;return e&&(i.action.value=e),validateForm(i)&&function e(){for(n in CKEDITOR.instances)CKEDITOR.instances[n].updateElement();for(n=0;n<s.length;n++)if(n==a){var t=s[n];if("confirmation"==t.type.toLowerCase()){if("function"!=typeof t.condition)return confirmDialog($.extend(t,{yesAction:function(){a++,e()}})),!1;if(t.condition(t))return confirmDialog($.extend(t,{yesAction:function(){a++,e()}})),!1;a++}else if("alert"==t.type.toLowerCase()){if("function"!=typeof t.condition)return alertDialog($.extend(t,{okAction:function(){a++,e()}})),!1;if(t.condition(t))return alertDialog($.extend(t,{okAction:function(){a++,e()}})),!1;a++}else if("validation"==t.type.toLowerCase())if("function"==typeof t.condition){if(t.condition(t))return alertDialog($.extend(t,{okAction:function(){a++}})),!1;a++}else a++;else a++}if(a==s.length){for(var n=0;n<o.length;n++)o[n]();actionModal(function(){i.submit()})}}(),!1},loadExtendedAttributes:function(e,t,n,i,a,s){var o="muraAction=cUsers.loadExtendedAttributes&baseID="+e+"&type="+t+"&subType="+n+"&siteID="+i+"&cacheid="+Math.random();siteID=i,context=a,themeAssetPath=s;var r=$("#extendSetsDefault");return r.length&&(r.html('<div class="load-inline"></div>'),$.ajax({url:"index.cfm?"+o,dataType:"text",success:function(e){-1!=e.indexOf("mura-primary-login-token")&&(location.href="./"),userManager.setExtendedAttributes(e)}})),!1},setExtendedAttributes:function(data){var r=eval("("+data+")");$("#extendSetsDefault").html(r.extended),$("#extendSetsBasic").html(r.basic),""==r.extended?$("#tabExtendedattributesLI").addClass("hide"):$("#tabExtendedattributesLI").removeClass("hide"),setHTMLEditors(),setDatePickers(".tab-content .datepicker",dtLocale),setColorPickers(".tab-content .mura-colorpicker"),setFinders(".tab-content .mura-finder"),setToolTips(".tab-content"),setFileSelectors()},checkExtendSetTargeting:function(){var e=$(".extendset"),t=!1,n=!1,i=!0;if(e.length){for(var a=0;a<e.length;a++){var s=e[a];if(null!=s.getAttribute("categoryid")&&""!=s.getAttribute("categoryid")){if(!n){var o=document.form1.categoryID;n=!0}for(var r=0;r<o.length;r++){var l=o[r],d=o[r].value,c=s.getAttribute("categoryid");!t&&null!=d&&-1<c.indexOf(d)&&(t=!0,membership=l.checked)}t&&membership?(userManager.setFormElementsDisplay(s,""),s.style.display="",i=!1):(userManager.setFormElementsDisplay(s,"none"),s.style.display="none")}else userManager.setFormElementsDisplay(s,""),s.style.display="",i=!1;t=!1}i?($("#extendMessage").show(),$("#extendDL").hide()):($("#extendMessage").hide(),$("#extendDL").show())}},resetExtendedAttributes:function(e,t,n,i,a,s){this.loadExtendedAttributes(e,t,n,i,a,s)},setFormElementsDisplay:function(e,t){var n=e.getElementsByTagName("input");if(n.length)for(var i=0;i<n.length;i++)n[i].style.display=t;if((n=e.getElementsByTagName("textarea")).length)for(i=0;i<n.length;i++)n[i].style.display=t;if((n=e.getElementsByTagName("select")).length)for(i=0;i<n.length;i++)n[i].style.display=t}};