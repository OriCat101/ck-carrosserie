var OS,browser,version,total,thestring,detect=navigator.userAgent.toLowerCase();function getBrowserInfo(){checkIt("konqueror")?(browser="Konqueror",OS="Linux"):checkIt("safari")?browser="Safari":checkIt("omniweb")?browser="OmniWeb":checkIt("opera")?browser="Opera":checkIt("webtv")?browser="WebTV":checkIt("icab")?browser="iCab":checkIt("msie")?browser="Internet Explorer":checkIt("compatible")?browser="An unknown browser":(browser="Netscape Navigator",version=detect.charAt(8)),version||(version=detect.charAt(place+thestring.length)),OS||(OS=checkIt("linux")?"Linux":checkIt("x11")?"Unix":checkIt("mac")?"Mac":checkIt("win")?"Windows":"an unknown operating system")}function checkIt(e){return place=detect.indexOf(e)+1,thestring=e,place}var Dialog={};Dialog.Box=Class.create(),Object.extend(Dialog.Box.prototype,{initialize:function(e){this.createOverlay(),this.dialog_box=$(e),this.dialog_box.show=this.show.bind(this),this.dialog_box.hide=this.hide.bind(this),this.parent_element=this.dialog_box.parentNode,this.dialog_container=document.getElementsByTagName("body")[0];var t=Element.getDimensions(this.dialog_box),o=Element.getDimensions(this.overlay);this.dialog_box.style.left=o.width/2-t.width/2+"px"},createOverlay:function(){$("dialog_overlay")?this.overlay=$("dialog_overlay"):(this.overlay=document.createElement("div"),this.overlay.id="dialog_overlay",document.body.insertBefore(this.overlay,document.body.childNodes[0]))},moveDialogBox:function(e){Element.remove(this.dialog_box),this.dialog_box="back"==e?this.parent_element.appendChild(this.dialog_box):this.overlay.parentNode.insertBefore(this.dialog_box,this.overlay)},show:function(){this.moveDialogBox("out"),this.overlay.onclick=this.hide.bind(this),"Internet Explorer"==browser&&version<=6&&(this.getScroll(),this.prepareIE("100%","hidden"),this.setScroll(0,0),this.selectBoxes("hide")),this.overlay.style.display="block";var e=Element.getDimensions(this.dialog_box),t=Element.getDimensions(this.overlay);this.dialog_box.style.left=t.width/2-e.width/2+"px",this.dialog_box.style.display="block"},hide:function(){"Internet Explorer"==browser&&(this.setScroll(0,this.yPos),this.prepareIE("auto","auto"),this.selectBoxes("show")),this.overlay.style.display="none",this.dialog_box.style.display="none",this.dialog_box.style.height="",this.dialog_box.style.overflow="",this.moveDialogBox("back"),$("editFormIframe").src=null,$A(this.dialog_box.getElementsByTagName("input")).each(function(e){"submit"!=e.type&&"hidden"!=e.type&&(e.value="")})},resize:function(){if("auto"!=this.dialog_box.style.overflow){var e=Element.getDimensions(this.dialog_box),t=Element.getDimensions(this.overlay);t.height<e.height+48&&(this.dialog_box.style.height=t.height-84+"px",this.dialog_box.style.overflow="auto")}},selectBoxes:function(e){$A(document.getElementsByTagName("select")).each(function(t){Element[e](t)}),"hide"==e&&$A(this.dialog_box.getElementsByTagName("select")).each(function(e){Element.show(e)})},prepareIE:function(e,t){bod=document.getElementsByTagName("body")[0],bod.style.height=e,bod.style.overflow=t,htm=document.getElementsByTagName("html")[0],htm.style.height=e,htm.style.overflow=t},getScroll:function(){self.pageYOffset?this.yPos=self.pageYOffset:document.documentElement&&document.documentElement.scrollTop?this.yPos=document.documentElement.scrollTop:document.body&&(this.yPos=document.body.scrollTop)},setScroll:function(e,t){window.scrollTo(e,t)}});